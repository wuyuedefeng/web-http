!function e(t,n,o){function r(u,a){if(!n[u]){if(!t[u]){var i="function"==typeof require&&require;if(!a&&i)return i(u,!0);if(s)return s(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[u]={exports:{}};t[u][0].call(f.exports,function(e){var n=t[u][1][e];return r(n?n:e)},f,f.exports,e,t,n,o)}return n[u].exports}for(var s="function"==typeof require&&require,u=0;u<o.length;u++)r(o[u]);return r}({1:[function(e,t,n){"use strict";!function(){var t={};e("./request")(t),window.xhttp=t}()},{"./request":3}],2:[function(e,t,n){"use strict";t.exports=function(e){return function(t){if(t.lengthComputable){var n=t.loaded/t.total*100;console.log(n),e.onProgress&&e.onProgress(t,n)}}}},{}],3:[function(e,t,n){"use strict";var o=e("./tool");t.exports=function(t){t.get=function(e,n,o){e.method="GET",t.request(e,n,o)},t.post=function(e,n,o){e.method="POST",t.request(e,n,o)},t.put=function(e,n,o){e.method="PUT",t.request(e,n,o)},t.delete=function(e,n,o){e.method="DELETE",t.request(e,n,o)},t.download=function(e,n,o){e.method="GET",t.request(e,n,o)},t.request=function(t,n,r){o.handleConfig(t,n,r),console.log(t.onEnd);var s=e("./xhr")();t.xhr=s,s.onprogress=e("./progress")(t),s.onreadystatechange=e("./stateChange")(t),t.async&&t.timeout&&(s.timeout=t.timeout,s.ontimeout=t.onTimeout||function(e){console.error(t.url+" request timeout "+t.timeout+"ms")});var u=o.objToParams(t.params);s.open(t.method,t.url+"?"+u,t.async),t.headers=t.headers||{},s.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var a in t.headers)s.setRequestHeader(a,t.headers[a]);return console.log(11,t.data,o.objToParams(t.data)),s.send(o.objToParams(t.data)||null),s}}},{"./progress":2,"./stateChange":4,"./tool":5,"./xhr":6}],4:[function(e,t,n){"use strict";function o(e,t,n,o,r){var s=e.xhr;console.log("-------",e.onEnd,e.onSuccess);var u=s.getResponseHeader("Content-Type"),a=s.response;"success"==t?(/json/i.test(u)&&(a=JSON.parse(a)),e.onEnd&&e.onEnd(!1,a),e.onSuccess&&e.onSuccess(a)):"error"==t&&(e.onEnd&&e.onEnd(!0,a),e.onError&&e.onError(a))}t.exports=function(e){var t=e.xhr;return function(){var n=t.readyState;4==n&&(200==t.status?o(e,"success",4,200):o(e,"error",4,t.status,t.statusText))}}},{}],5:[function(e,t,n){"use strict";function o(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}n.objToParams=o,n.objToData=function(e){if("FormData"in window){var t=new FormData;for(key in e)console.log(key),t.append(key,e.key)}else t=o(e);return t},n.handleConfig=function(e,t,n){return e=e||{},e.params=e.params||{},e.data=e.data||{},e.onSuccess=e.onSuccess||t,e.onError=e.onError||n,e.async!==!1&&(e.async=!0),e}},{}],6:[function(e,t,n){"use strict";t.exports=function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else{if(!window.ActiveXObject)return e||alert("浏览器不支持xmlHttpRequest"),null;e=new ActiveXObject("Microsoft.XMLHTTP")}return e}},{}]},{},[1]);