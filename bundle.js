!function e(t,o,n){function r(a,u){if(!o[a]){if(!t[a]){var i="function"==typeof require&&require;if(!u&&i)return i(a,!0);if(s)return s(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=o[a]={exports:{}};t[a][0].call(l.exports,function(e){var o=t[a][1][e];return r(o?o:e)},l,l.exports,e,t,o,n)}return o[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(e,t,o){"use strict";!function(){var t={};e("./request")(t),window.xhttp=t}()},{"./request":3}],2:[function(e,t,o){"use strict";t.exports=function(e){return function(t){if(t.lengthComputable){var o=t.loaded/t.total*100;console.log(o),e.onProgress&&e.onProgress(t,o)}}}},{}],3:[function(e,t,o){"use strict";var n=e("./tool");t.exports=function(t){t.get=function(e,o,n){e.method="GET",t.request(e,o,n)},t.post=function(e,o,n){e.method="POST",t.request(e,o,n)},t.put=function(e,o,n){e.method="PUT",t.request(e,o,n)},t.delete=function(e,o,n){e.method="DELETE",t.request(e,o,n)},t.download=function(e,o,n){e.method="GET",t.request(e,o,n)},t.upload=function(t,o,n){t.method="upload",e("./requestUpload")(t,o,n)},t.request=function(t,o,r){n.handleConfig(t,o,r);var s=e("./xhr")();t.xhr=s,s.onprogress=e("./progress")(t),s.onreadystatechange=e("./stateChange")(t),t.async&&t.timeout&&(s.timeout=t.timeout,s.ontimeout=t.onTimeout||function(e){console.error(t.url+" request timeout "+t.timeout+"ms")});var a=n.objToParams(t.params);s.open(t.method,t.url+"?"+a,t.async),t.headers=t.headers||{},s.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var u in t.headers)s.setRequestHeader(u,t.headers[u]);return s.send(n.objToParams(t.data)||null),s}}},{"./progress":2,"./requestUpload":4,"./stateChange":5,"./tool":6,"./xhr":7}],4:[function(e,t,o){"use strict";var n=e("./tool");t.exports=function(t,o,r){var s,a;n.handleConfig(t,o,r);var u=e("./xhr")();t.xhr=u,u.onreadystatechange=e("./stateChange")(t),u.upload.onloadstart=function(){s=(new Date).getTime(),a=0},u.upload.onprogress=function(e){if(e.lengthComputable){var o=event.loaded/event.total*100;console.log("upload:",o),t.onProgress&&t.onProgress(event,o)}},u.onload=function(e){console.log("上传成功！")},u.onerror=function(e){console.log("上传失败！")},u=new XMLHttpRequest;var i=n.objToParams(t.params);u.open("post",t.url+"?"+i,t.async),u.send(t.data)}},{"./stateChange":5,"./tool":6,"./xhr":7}],5:[function(e,t,o){"use strict";function n(e,t,o,n,r){var s=e.xhr;console.log("-------",e.onEnd,e.onSuccess);var a=s.getResponseHeader("Content-Type"),u=s.response;"success"==t?(/json/i.test(a)&&(u=JSON.parse(u)),e.onEnd&&e.onEnd(!1,u),e.onSuccess&&e.onSuccess(u)):"error"==t&&(e.onEnd&&e.onEnd(!0,u),e.onError&&e.onError(u))}t.exports=function(e){var t=e.xhr;return function(){var o=t.readyState;4==o&&(200==t.status?n(e,"success",4,200):n(e,"error",4,t.status,t.statusText))}}},{}],6:[function(e,t,o){"use strict";function n(e){return Object.keys(e).map(function(t){return t+"="+e[t]}).join("&")}o.objToParams=n,o.objToData=function(e){if("FormData"in window){var t=new FormData;for(key in e)console.log(key),t.append(key,e.key)}else t=n(e);return t},o.handleConfig=function(e,t,o){return e=e||{},e.params=e.params||{},e.data=e.data||{},e.onSuccess=e.onSuccess||t,e.onError=e.onError||o,e.async!==!1&&(e.async=!0),e}},{}],7:[function(e,t,o){"use strict";t.exports=function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else{if(!window.ActiveXObject)return e||alert("浏览器不支持xmlHttpRequest"),null;e=new ActiveXObject("Microsoft.XMLHTTP")}return e}},{}]},{},[1]);