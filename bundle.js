!function e(o,t,n){function r(u,a){if(!t[u]){if(!o[u]){var i="function"==typeof require&&require;if(!a&&i)return i(u,!0);if(s)return s(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[u]={exports:{}};o[u][0].call(l.exports,function(e){var t=o[u][1][e];return r(t?t:e)},l,l.exports,e,o,t,n)}return t[u].exports}for(var s="function"==typeof require&&require,u=0;u<n.length;u++)r(n[u]);return r}({1:[function(e,o,t){"use strict";!function(){var o={};e("./request")(o),window.xhttp=o}()},{"./request":3}],2:[function(e,o,t){"use strict";o.exports=function(e){return function(o){if(o.lengthComputable){var t=o.loaded/o.total*100;console.log(t),e.onProgress&&e.onProgress(o,t)}}}},{}],3:[function(e,o,t){"use strict";var n=e("./tool");o.exports=function(o){o.get=function(e,t,n){e.method="GET",o.request(e,t,n)},o.post=function(e,t,n){e.method="POST",o.request(e,t,n)},o.put=function(e,t,n){e.method="PUT",o.request(e,t,n)},o.delete=function(e,t,n){e.method="DELETE",o.request(e,t,n)},o.download=function(e,t,n){e.method="GET",o.request(e,t,n)},o.upload=function(o,t,n){o.method="upload",e("./requestUpload")(o,t,n)},o.request=function(o,t,r){n.handleConfig(o,t,r);var s=e("./xhr")();o.xhr=s,s.onprogress=e("./progress")(o),s.onreadystatechange=e("./stateChange")(o),o.async&&o.timeout&&(s.timeout=o.timeout,s.ontimeout=o.onTimeout||function(e){console.error(o.url+" request timeout "+o.timeout+"ms")});var u=n.objToParams(o.params);s.open(o.method,o.url+"?"+u,o.async),o.headers=o.headers||{},s.setRequestHeader("Content-type","application/x-www-form-urlencoded");for(var a in o.headers)s.setRequestHeader(a,o.headers[a]);return s.send(n.objToParams(o.data)||null),s}}},{"./progress":2,"./requestUpload":4,"./stateChange":5,"./tool":6,"./xhr":7}],4:[function(e,o,t){"use strict";var n=e("./tool");o.exports=function(o,t,r){var s,u;n.handleConfig(o,t,r);var a=e("./xhr")();o.xhr=a,a.upload.onloadstart=function(){s=(new Date).getTime(),u=0},a.upload.onprogress=function(e){if(e.lengthComputable){var t=event.loaded/event.total*100;console.log("upload:",t),o.onProgress&&o.onProgress(event,t)}},a.onload=function(e){console.log("上传成功！")},a.onerror=function(e){console.log("上传失败！")},a=new XMLHttpRequest;var i=n.objToParams(o.params);a.open("post",o.url+"?"+i,o.async),a.send(o.data)}},{"./tool":6,"./xhr":7}],5:[function(e,o,t){"use strict";function n(e,o,t,n,r){var s=e.xhr;console.log("-------",e.onEnd,e.onSuccess);var u=s.getResponseHeader("Content-Type"),a=s.response;"success"==o?(/json/i.test(u)&&(a=JSON.parse(a)),e.onEnd&&e.onEnd(!1,a),e.onSuccess&&e.onSuccess(a)):"error"==o&&(e.onEnd&&e.onEnd(!0,a),e.onError&&e.onError(a))}o.exports=function(e){var o=e.xhr;return function(){var t=o.readyState;4==t&&(200==o.status?n(e,"success",4,200):n(e,"error",4,o.status,o.statusText))}}},{}],6:[function(e,o,t){"use strict";function n(e){return Object.keys(e).map(function(o){return o+"="+e[o]}).join("&")}t.objToParams=n,t.objToData=function(e){if("FormData"in window){var o=new FormData;for(key in e)console.log(key),o.append(key,e.key)}else o=n(e);return o},t.handleConfig=function(e,o,t){return e=e||{},e.params=e.params||{},e.data=e.data||{},e.onSuccess=e.onSuccess||o,e.onError=e.onError||t,e.async!==!1&&(e.async=!0),e}},{}],7:[function(e,o,t){"use strict";o.exports=function(){var e=null;if(window.XMLHttpRequest)e=new XMLHttpRequest;else{if(!window.ActiveXObject)return e||alert("浏览器不支持xmlHttpRequest"),null;e=new ActiveXObject("Microsoft.XMLHTTP")}return e}},{}]},{},[1]);